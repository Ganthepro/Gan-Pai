<!doctype html>
<html lang="en">

<head>
    <link rel="shortcut icon" type="image/x-icon" href="letter-g.png">
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="color-scheme" content="light only">
    <link href="https://fonts.googleapis.com/css2?  family=Hubballi&family=Kanit:wght@100&family=Prompt&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Square+Peg&display=swap" rel="stylesheet">
    <title>ลงทะเบียน</title>
    <link href="main.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?  family=Hubballi&family=Kanit:wght@100&family=Prompt&display=swap"
        rel="stylesheet">
</head>

<body oncopy="return false" onpaste="return false" oncut="return false">
    <header id="header">
        <h1>Tamtikorn</h1>
        <h3 id="h3-header">E-Portfolio วิศวกรรมคอมพิวเตอร์</h3>
        <div class="container_h3">
            <div id="h3-div">
                <h3 class="h3-1">E-Portfolio</h3>
                <h3 class="h3-2">วิศวกรรมคอมพิวเตอร์</h3>
            </div>
        </div>
        <div id="a-link">
            <button id="button-1" onclick="window.location.href = 'https://ganthedev.ddns.net/'">Home</button>
            <button id="button-2" onclick="window.location.href = 'https://github.com/Ganthepro'">GitHub</button>
        </div>
        <div id="a-link2">
            <a id="new_a_home" href="https://ganthedev.ddns.net/"><img src="home-pngrepo-com.png"></a>
            <a id="new_a_github" href="https://github.com/Ganthepro"><img src="github-pngrepo-com (1).png"></a>
        </div>
    </header>
    <h1 style="text-align: center;" id="detail">ลงทะเบียนครั้งแรก</h1>
    <div class="container" id="personal">
        <div class="row justify-content-center pt-5">
            <div class="col-lg-7 col-md-10">
                <form class="form_overlay" method="POST" accept-charset="UTF-8" autocomplete="off" name="restaurants"
                    id="form">
                    <input type="text" id="loc" name="Location" style="opacity: 0;position: absolute;width: 100%;left: 0;z-index: -10;">
                    <input type="text" id="dt" name="Date/Time" style="opacity: 0;position: absolute;width: 100%;left: 0;z-index: -10;">
                    <div class="row g-4">
                        <div class="col-lg-6">
                            <div class="input_overlay">
                                <label for="fname" class="lable">
                                    <h1 class="lable_h1">Enter your ID</h1>
                                </label>
                                <hr>
                                <input type="text" name="ID" class="form-control" required autocomplete="off"
                                    placeholder="ID" id="user">
                            </div>
                        </div>
                        <div id="buttonSubmit">
                            <button type="submit" class="btn-primary" id="mt-3"><p>Submit</p></button>
                            <button class="btn-primary" id="mt-2">
                                <a id="a-btn" href="https://docs.google.com/spreadsheets/d/1IUQKYDa5rHDI520jWxNBzVTOV1pWX4MDCXPNQr5dEPE/edit#gid=1356909475">View Data</a>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <p id="demo"></p>
            </form>
        </div>
    </div>
    </div>
    <footer class="footer">
        <h1 id="h1-footer">Thanks!</h1>
        <p id="myinfo">COPYRIGHT © Tamtikorn 2022 All Right Reserved</p>
        <div class="info">
            <h3>Developed & Design Languages</h3>
            <p>HTML,CSS & Javascript</p>
            <h3>Developed & Design Program</h3>
            <p>Visual Studio Code & GitHub</p>
        </div>
        <div class="profile-image"></div>
        <div class="contact">
            <h3>Contact</h3>
            <a href="https://www.facebook.com/profile.php?id=100003850463696" target="_blank"><img src="facebook.png"
                    alt="fb-logo"></a>
            <a href="https://www.instagram.com/gan_gun112/?hl=th" target="_blank"><img src="instagram.png"
                    alt="ig-logo"></a>
            <p>gan_zaza_12@hotmail.com</p>
            <p>Tel. 098-859-5020</p>
        </div>
    </footer>
    <script>
        function getPara(loc) {
            let para = new URLSearchParams(window.location.search)
            return para.get(loc)
        }
        // console.log(localStorage.getItem('name'))
        // localStorage.clear()
        if (localStorage.getItem('name') == null) {
            console.log(localStorage.getItem('name'))
            localStorage.setItem('all', '[]');localStorage.setItem('name','')
        }
        
        // let all_loc = JSON.parse(localStorage.getItem('all'))
        let local_name = localStorage.getItem('name')
        console.log(local_name)
        const loc = getPara('loc')
        // all_loc.push(loc)
        // localStorage.setItem('all', JSON.stringify(all_loc))
        // localStorage.setItem('status', status_js)
        
        const scriptURL = 'https://script.google.com/macros/s/AKfycbx5BSfMMYu-ng_n-V14coSZ8GVOVr2dHTH7I0QVnWYKyXpmT0gXX8EyQaXyN1S1mLyq/exec'
        let cookies = document.cookie.split(';').map(cookie => cookie.split('=')).reduce((accumulator, [key, value]) => ({ ...accumulator, [key.trim()]: decodeURIComponent(value) }), {});
        const form = document.forms['restaurants']
        document.getElementById('detail').innerHTML = 'ลงทะเบียนครั้งแรก ' + '(' + loc + ')'
        // console.log(all_loc)
        if (local_name == '') {
            form.addEventListener('submit', e => {
                // const d = new Date()
                // document.getElementById('loc').defaultValue = loc
                // document.getElementById('dt').defaultValue = d.getDate() + '/' + d.getMonth() + '/' + d.getFullYear() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()
                localStorage.setItem('name',document.getElementById('user').value)
                e.preventDefault()
                // fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                //     .then(response => restaurants.reset())
                //     .catch(error => console.error('Error!', error.message))
                location.reload()
            })
        } else if (local_name != '') {
            document.getElementById("mt-3").click();
            const d = new Date()
            document.getElementById('loc').defaultValue = loc
            document.getElementById('user').defaultValue = local_name 
            document.getElementById('dt').defaultValue = d.getDate() + '/' + d.getMonth() + '/' + d.getFullYear() + ' ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()
            // localStorage.setItem('name',document.getElementById('user').value)
            // console.log('click')
            // e.preventDefault()
            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => restaurants.reset())
                .catch(error => console.error('Error!', error.message))
            const forums = document.getElementById('form')
            const br = document.createElement('br')
            const hr = document.createElement('hr')
            const p = document.createElement('p')
            const text = document.createElement('h1')
            const background = document.getElementById('personal')
            const clear_btn = document.createElement('button')
            const view_btn = document.createElement('button');const a_btn = document.createElement('a') 
            document.getElementById('detail').innerHTML = 'Log In'
            forums.style.opacity = '0'
            text.innerHTML = 'Finish!!!'; p.innerHTML = 'คุณถูกบันทึกเข้าระบบแล้ว'; p.style.fontSize = '20px'
            text.style.position = 'absolute'; text.style.font = 'bold'; text.style.fontSize = '72px'
            text.style.top = '40%'; text.style.left = '50%'; hr.style.marginTop = '10px'
            text.style.transform = 'translate(-50%,-40%)';view_btn.setAttribute('class','btn-primary')
            clear_btn.innerText = 'Clear'; clear_btn.setAttribute('onclick', 'clearStorage()'); clear_btn.setAttribute('id','clearBtn')
            a_btn.innerHTML = 'View Data';a_btn.setAttribute('id','a-btn');view_btn.style.position = 'absolute';a_btn.setAttribute('href','https://docs.google.com/spreadsheets/d/1IUQKYDa5rHDI520jWxNBzVTOV1pWX4MDCXPNQr5dEPE/edit#gid=1356909475')
            view_btn.style.bottom = '-80px';view_btn.style.left = '50%';view_btn.style.transform = 'translate(-50%,0)';view_btn.appendChild(a_btn);
            text.appendChild(view_btn)
            text.appendChild(br)
            text.appendChild(p)
            text.appendChild(hr)
            text.appendChild(clear_btn)
            background.appendChild(text)
        }
        function clearStorage() {
            // let status_js = localStorage.getItem('status')
            // status_js = 'new'
            // let all_loc = JSON.parse(localStorage.getItem('all'))
            // for (var i = 0; i < all_loc.length; i++) {
            //     if (all_loc[i] == cookies.loc) {
            //         all_loc.splice(i, 1);
            //     }
            // }
            // localStorage.setItem('all', JSON.stringify(all_loc))
            localStorage.setItem('name','')
            location.reload()
        }

        var break_key = 0;
        var break_key1 = 0;
        const home = document.getElementById('button-1');
        const github = document.getElementById('button-2');
        const a_link = document.getElementsByClassName('a-link');
        var width = window.innerWidth;
        if (width < 984 && break_key === 0) {
            home.remove();
            github.remove();
            const new_a_home = document.createElement('a');
            const new_a_home_img = document.createElement('img');
            const new_a_github = document.createElement('a');
            const new_a_github_img = document.createElement('img');
            const a_link = document.getElementById('a-link');
            const mypic = document.getElementById('mypic');
            new_a_home.setAttribute('id', 'new_a_home');
            new_a_home.setAttribute('href', '/tamtikorn_portfolio');
            new_a_github.setAttribute('id', 'new_a_github');
            new_a_github.setAttribute('href', 'https://github.com/Ganthepro/Ganthepro/tree/main/project');
            new_a_home_img.setAttribute('src', 'home-pngrepo-com.png');
            new_a_github_img.setAttribute('src', 'github-pngrepo-com (1).png');
            new_a_home_img.style.width = '25px';
            new_a_home_img.style.height = '25px';
            new_a_home_img.style.marginRight = '25px';
            new_a_github_img.style.width = '25px';
            new_a_github_img.style.height = '25px';
            a_link.style.marginRight = '10px'
            new_a_home.appendChild(new_a_home_img);
            new_a_github.appendChild(new_a_github_img);
            a_link.appendChild(new_a_home);
            a_link.appendChild(new_a_github);
            break_key += 1
        }
        else if (width > 984 && break_key1 === 0) {
            break_key1 += 1
            break_key += 1
        }
        window.addEventListener('resize', function () {
            var width = window.innerWidth;
            const new_a_home = document.createElement('a');
            const new_a_home_img = document.createElement('img');
            const new_a_github = document.createElement('a');
            const new_a_github_img = document.createElement('img');
            const a_link = document.getElementById('a-link');
            const svg1 = document.getElementById('svg-1');
            const svg2 = document.getElementById('svg-2');
            if (width < 768 && break_key === 0) {
                home.remove();
                github.remove();
                new_a_home.setAttribute('id', 'new_a_home');
                new_a_home.setAttribute('href', '/tamtikorn_portfolio');
                new_a_github.setAttribute('id', 'new_a_github');
                new_a_github.setAttribute('href', 'https://github.com/Ganthepro/Ganthepro/tree/main/project');
                new_a_home_img.setAttribute('src', 'home-pngrepo-com.png');
                new_a_github_img.setAttribute('src', 'github-pngrepo-com (1).png');
                svg1.style.width = toString(width) + 'px'
                svg2.style.width = toString(width) + 'px'
                break_key += 1
                break_key1 -= 1
            }
            else if (width > 984 && break_key1 === 0) {
                const a_home = document.getElementById('new_a_home');
                const a_github = document.getElementById('new_a_github');
                a_home.remove()
                a_github.remove()
                const button_1 = document.createElement('button');
                button_1.setAttribute('id', 'button-1')
                button_1.setAttribute('onclick', "window.location.href = '/tamtikorn_portfolio'")
                button_1.innerHTML = 'Home'
                const button_2 = document.createElement('button');
                button_2.setAttribute('id', 'button-2')
                button_2.setAttribute('onclick', "window.location.href = 'https://github.com/Ganthepro/Ganthepro/tree/main/project'")
                button_2.innerHTML = 'GitHub'
                a_link.appendChild(button_1);
                a_link.appendChild(button_2);
                a_link.style.marginRight = '0'
                a_link.style.position = 'absolute'
                break_key1 += 1
            }
        })
    </script>
</body>

</html>